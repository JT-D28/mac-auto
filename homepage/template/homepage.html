{% load static %}

<!DOCTYPE html>
<head>
    <!-- 禁止浏览器从本地缓存中调阅页面。-->
    <meta http-equiv="pragram" content="no-cache">
    <!--网页不保存在缓存中，每次访问都刷新页面。-->
    <meta http-equiv="cache-control" content="no-cache, must-revalidate">
    <!--同上面意思差不多，必须重新加载页面-->
    <!--网页在缓存中的过期时间为0，一旦网页过期，必须从服务器上重新订阅-->
    <meta http-equiv="expires" content="0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="{% static 'homepage/vue.js' %}"></script>
    <link rel="stylesheet" href="{% static 'homepage/eleui/theme-chalk/index.css' %}">
    <link rel="stylesheet" href="{% static 'homepage/layui/css/layui.css' %}" media="all">
    <link rel="stylesheet" href="{% static 'homepage/layui/css/layuimini.css' %}" media="all">
    <script src="{% static 'homepage/eleui/index.js' %}"></script>
    <script src="{% static 'manager/js/utils.js' %}" charset="utf-8"></script>
    <script src="{% static 'homepage/echarts.common.min.js' %}" charset="utf-8"></script>
    <script src="{% static 'homepage/echartsTheme.js' %}" charset="utf-8"></script>
    <script src="{% static 'homepage/layui/layui.js' %}" charset="utf-8"></script>
    <script src="{% static 'manager/js/jquery.min.js' %}"></script>
    <title></title>
</head>

<style>
    #coverage > .el-card__body {
        padding: 0px !important;
    }
    .el-step.is-vertical .el-step__title{
        line-height: 40px;
    }
    #coverage > .el-card__header {
        padding: 7px 20px 0px 0;
        height: 40px;
        border-bottom: 0px
    }

    #selectpd,
    #selectpl {
        padding-left: 42px;
    }

    body {
        background-color: #f2f2f2
    }

    .jacocofontsize {
        font-size: 12px;
        padding-left: 5px;
    }
    .el-tree-node:hover>.el-tree-node__content{
        background-color: rgba(48, 217, 96, 0.69);
    }
    .el-input__inner {
        height: 34px !important;
        line-height: 34px;
    }

    .workbtn-module {
        text-align: center;
        top: 50%;
        transform: translateY(-50%);
        border-right: 2px solid rgba(248, 248, 248, 1);
    }

    .workbtn-module a i {
        display: inline-block;
        width: 100%;
        height: 60px;
        line-height: 60px;
        text-align: center;
        border-radius: 2px;
        font-size: 30px;
        background-color: rgba(0, 0, 0, 0);
        color: #333;
        transition: all .3s;
        -webkit-transition: all .3s;
    }

    .workbtn-module a cite {
        position: relative;
        top: 6px;
        display: block;
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;
        font-size: 14px;
        font-family: PingFang-SC-Regular, PingFang-SC;
        font-weight: 400;
        color: rgba(53, 59, 75, 1);
        line-height: 20px;
    }

    .layui-card > .el-tabs > .el-tabs__header {
        margin-right: 0px;
        margin-bottom: -40px;
    }

    .el-input__icon {
        line-height: 0;
    }

    .layui-card > .el-tabs > .el-tabs__content {
        height: 100%;
    }

    #planHistory > .el-dialog {
        height: 95%;
    }

    #noticeSet > .el-dialog,
    #productSet > .el-dialog {
        height: 85%;
    }

    #productSet .el-tab-pane {
        height: 100%;
        overflow-y: auto;
    }


    #coverage > .el-card__body {
        height: calc(100% - 50px)
    }


    #coveragerow > .layui-col-md4 {
        height: 50%;
    }

    #branchCoverage div {
        height: 100%;
        width: 50%;
    }

    .el-tabs__item.is-active {
        color: rgba(0, 151, 136, 1);
    }

    .el-tabs__active-bar {
        background-color: rgba(0, 151, 136, 1);
    }

    .el-tabs__nav-wrap::after {
        background-color: white;
        height: 0px;
    }

    .el-tabs__nav {
        left: 18px
    }

    .layui-card .el-tabs--top .el-tabs__item.is-bottom:nth-child(2),
    .layui-card .el-tabs--top .el-tabs__item.is-top:nth-child(2) {
        font-size: 13px;
        font-family: PingFang-SC-Medium, PingFang-SC;
        font-weight: 500;
        color: rgba(0, 151, 136, 1);
        padding-right: 13px;
    }

    .layui-card .el-tabs--top .el-tabs__item.is-bottom:last-child,
    .layui-card .el-tabs--top .el-tabs__item.is-top:last-child {
        font-size: 13px;
        font-family: PingFang-SC-Medium, PingFang-SC;
        font-weight: 500;
        color: rgba(0, 151, 136, 1);
        padding-left: 13px;
    }

    #productSet .el-tabs__nav {
        height: 26px;
    }

    #productSet .el-tabs__item {
        font-family: PingFang-SC-Medium, PingFang-SC;
        font-weight: 500;
        line-height: 16px;
        height: 26px;
        padding-right: 28px;
        padding-left: 0px;
    }

    #productSet .el-tabs__nav {
        left: 25px;
    }

    #productSet .el-tabs__header {
        border-bottom: 1px solid rgba(233, 234, 236, 1);
        margin-bottom: 0px;
    }


    .el-tabs__item {
        line-height: 50px;
    }

    .el-range-editor.is-active, .el-range-editor.is-active:hover, .el-select .el-input.is-focus .el-input__inner {
        height: 34px !important;
    }

    .el-select > .el-input {
        height: 34px;
    }

    .el-input__inner, .el-input__icon {
        height: 34px;
        line-height: 34px;
    }

    .el-input__inner, .el-input__icon {
        height: 34px;
        line-height: 34px;
    }

    .layui-card-header {
        padding-right: 20px;
        height: 42px;
        text-align: center;
        font-size: 16px;
        font-family: PingFang-SC-Medium, PingFang-SC;
        font-weight: 500;
        color: rgba(51, 51, 51, 1);
        border-bottom: 0px;
        border-top: 1px solid rgba(242, 244, 245, 1);;
    }

    .el-dialog__title {
        font-size: 14px;
        font-family: PingFang-SC-Medium, PingFang-SC;
        font-weight: 500;
        color: rgba(53, 59, 75, 1);
        line-height: 20px;
    }

    #planHistory .el-dialog__body {
        padding: 20px;
    }

    .el-date-editor .el-range-separator {
        line-height: 23px;
    }

    .layui-table, .layui-table-view {
        margin: 20px 0 0 0
    }

    #productSet .el-dialog__body {
        padding: 0;
        height: calc(100% - 151px);
    }

    #noticeSet .el-dialog__body {
        padding: 0;
        height: calc(100% - 122px);
    }

    .el-dialog__header {
        padding: 15px 20px 20px;
    }

    #productSet .el-tabs, #productSet .el-tabs .el-tabs__content {
        height: 100%;
    }

    #noticeSet .el-form-item,
    #productSet .el-form-item {
        padding: 0px 60px 0 30px;
        margin-bottom: 16px;
    }

    #planHistory .el-dialog__header,
    #noticeSet .el-dialog__header {
        border-bottom: 1px solid rgba(233, 234, 236, 1);
        padding: 15px 20px
    }

    #noticeSet .el-dialog__headerbtn {
        top: 16px
    }

    #noticeSet .el-dialog__body,
    #productSet .el-tabs__content {
        background: rgba(247, 248, 250, 1);
        font-size: 12px;
        font-family: PingFang-SC-Medium, PingFang-SC;
        font-weight: 500;
        color: rgba(53, 59, 75, 1);
        line-height: 17px;
        border-bottom: 1px solid rgba(233, 234, 236, 1);
    }

    .el-dialog__footer {
        position: absolute;
        bottom: 0;
        right: 0;
    }

    #servicename div, #servicename .el-textarea__inner {
        height: 100%;
    }

</style>
<body>
<div id="app">
    <template>
        <div id="header" style="height: 74px;">
            <el-form :inline="true" :model="form" style="padding: 20px" class="demo-form-inline">
                <el-select id="selectpd" v-model="form.product" filterable placeholder="选择产品"
                           style="width: 240px;padding-right: 15px"
                           @change="selectProduct">
                    <img slot="prefix" src="{% static 'manager/icon/product.svg' %}"
                         style="width:18px;height:18px;padding: 8px 10px;">
                    <el-option v-for="product in products" :key="product.id"
                               :label="product.description"
                               :value="product.id">
                    </el-option>
                </el-select>
                <el-select id="selectpl" v-model="form.plan" @visible-change="selectPlanVisible($event)" filterable
                           placeholder="选择计划" style="width: 240px">
                    <img slot="prefix" src="{% static 'manager/icon/plan.svg' %}"
                         style="width:18px;height:18px;padding: 8px 10px;">
                    <el-option v-for="plan in plans" :key="plan.id" :label="plan.name"
                               :value="plan.id">
                    </el-option>
                </el-select>
            </el-form>
        </div>
        <div id="body" style="height: 19%;padding: 0 20px 20px 20px;">
            <div style="height: 100%;background-color: rgba(255,255,255,1)">
                <div class="layui-row" style="height: 100%;">
                    <div class="layui-col-xs2 layui-col-md2 workbtn-module" style="padding: 1.3%">
                        <a @click="runplan" href="javascript:;" title="这里是验证用例，调试去用例管理！">
                            <img src="{% static 'manager/icon/run.svg' %}">
                            <cite>验证</cite>
                        </a>
                    </div>
                    <div class="layui-col-xs2 layui-col-md2 workbtn-module" style="padding: 1.3%">
                        <a @click="setplan" href="javascript:;">
                            <img src="{% static 'manager/icon/proset.svg' %}">
                            <cite>项目设置</cite>
                        </a>
                    </div>
                    <!--<div class="layui-col-xs2 layui-col-md2 workbtn-module" style="padding: 1.3%">
                        <a @click="planHistory" href="javascript:;">
                            <img src="{% static 'manager/icon/history.svg' %}">
                            <cite>历史记录</cite>
                        </a>
                    </div>-->
                    <div class="layui-col-xs2 layui-col-md2 workbtn-module" style="padding: 1.3%">
                        <a @click="statisticalAnalysis" href="javascript:;">
                            <img src="{% static 'manager/icon/history.svg' %}">
                            <cite>运行统计</cite>
                        </a>
                    </div>
                    <div class="layui-col-xs2 layui-col-md2 workbtn-module" style="padding: 1.3%">
                        <a @click="newRepoet" @contextmenu.prevent="downloadReport" href="javascript:;">
                            <img src="{% static 'manager/icon/report.svg' %}">
                            <cite>最新报告</cite>
                        </a>
                    </div>
                    <div class="layui-col-xs2 layui-col-md2 workbtn-module" style="padding: 1.3%">
                        <a @click="setPlanNotice" href="javascript:;">
                            <img src="{% static 'manager/icon/send.svg' %}">
                            <cite>报告通知</cite>
                        </a>
                    </div>
                    <div class="layui-col-xs2 layui-col-md2 workbtn-module" style="padding: 1.3%">
                        <a @click="seeprocess" @contextmenu.prevent="downloadRunlog"
                           href="javascript:;">
                            <img src="{% static 'manager/icon/runlog.svg' %}">
                            <cite>运行日志</cite>
                        </a>
                    </div>
                </div>
            </div>

        </div>
        <div id="foot" style="height: 40%">
            <div class="" v-show="showReport" style="display:flex;bottom: 0;height: 100%">
                <div class="layui-card"
                     style="width:25%;min-width:300px;margin: 0px 20px 20px 20px;display: inline-block">
                    <div style="padding:20px;height: calc(100% - 40px)">
                        <div>
                            <p style="font-size:14px;font-family:PingFang-SC-Medium,PingFang-SC;font-weight:500;line-height:20px;">
                                产品运行情况</p>
                        </div>
                        <div style="height: calc(50% - 20px)">
                            <div style="padding: 7% 0;height: 100%">
                                <div id="productCount"
                                     style="width: 100%;height: 70%;max-height:200px;padding-top: 7%"></div>
                            </div>
                        </div>
                        <div style="height:calc(50% - 20px);padding-top: 11.3%">
                            <div style="padding: 0 0;height: 100%">
                                <div id="productRate"
                                     style="width: 100%;height: 70%;max-height:200px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-card" style="flex:1;width:100%;margin: 0px 20px 20px 0;display: inline-block">
                    <el-tabs @tab-click="reportChartCilck" :tab-position="topposition" style="height: 100%">
                        <el-tab-pane label="计划成功率" style="height: 100%">
                            <div id="echarts-records"
                                 style="background-color:#f2f2f2;height:100%;"></div>
                        </el-tab-pane>

                        <el-tab-pane label="代码覆盖率" style="height: 100%">
                            <el-card id="coverage" class="box-card" style="height: 100%">
                                <div slot="header" class="clearfix">
                                    <el-button
                                            style="margin-left:20px;height: 34px;padding-top: 10px;float: right;background:rgba(248,123,103,1);border-radius:2px;border-color:rgba(248,123,103,1)"
                                            type="success"
                                            @click="jacocoRun">
                                        运行
                                    </el-button>
                                    <el-button
                                            style="margin-left:20px;height: 34px;padding-top: 10px;float: right;background:rgba(0,151,136,1);border-radius:2px;border-color:rgba(0,151,136,1)"
                                            type="success"
                                            @click="jacocoReFlash('update')">${synchronize}
                                    </el-button>
                                    <el-select @change="serviceChange" clearable collapse-tags filterable
                                               v-model="form.service" multiple style="width: 30%;float: right">
                                        <el-option
                                                v-for="i in services"
                                                :key="i.id"
                                                :label="i.name"
                                                :value="i.id">
                                        </el-option>
                                    </el-select>
                                </div>
                                <div id="coveragerow" class="layui-row" style="height: 100%;padding-top: 8px">
                                    <div class="layui-col-md4">
                                        <div class="layui-card" style="height: 100%;">
                                            <div class="layui-card-header">
                                                branchCoverage
                                            </div>
                                            <div class="layui-card-body"
                                                 style="padding:5px 5px;height: calc(100% - 55px)">
                                                <div id="branchCoverage" class="layui-col-md6"
                                                     style="width: 100%;height: 100%;max-height: 200px;top:50%;transform: translateY(-50%);"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="layui-col-md4">
                                        <div class="layui-card" style="height: 100%;">
                                            <div class="layui-card-header">
                                                classCoverage
                                            </div>
                                            <div class="layui-card-body"
                                                 style="padding:5px 5px;height: calc(100% - 55px)">
                                                <div id="classCoverage" class="layui-col-md6"
                                                     style="width: 100%;height: 100%;max-height: 200px;top:50%;transform: translateY(-50%);"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="layui-col-md4">
                                        <div class="layui-card" style="height: 100%;">
                                            <div class="layui-card-header">
                                                instructionCoverage
                                            </div>
                                            <div class="layui-card-body"
                                                 style="padding:5px 5px;height: calc(100% - 55px)">
                                                <div id="instructionCoverage" class="layui-col-md6"
                                                     style="width: 100%;height: 100%;max-height: 200px;top:50%;transform: translateY(-50%);"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="layui-col-md4">
                                        <div class="layui-card" style="height: 100%;">
                                            <div class="layui-card-header">
                                                complexityScore
                                            </div>
                                            <div class="layui-card-body"
                                                 style="padding:5px 5px;height: calc(100% - 55px)">
                                                <div id="complexityScore" class="layui-col-md6"
                                                     style="width: 100%;height: 100%;max-height: 200px;top:50%;transform: translateY(-50%);"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="layui-col-md4">
                                        <div class="layui-card" style="height: 100%;">
                                            <div class="layui-card-header">
                                                lineCoverage
                                            </div>
                                            <div class="layui-card-body"
                                                 style="padding:5px 5px;height: calc(100% - 55px)">
                                                <div id="lineCoverage" class="layui-col-md6"
                                                     style="width: 100%;height: 100%;max-height: 200px;top:50%;transform: translateY(-50%);"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="layui-col-md4">
                                        <div class="layui-card" style="height: 100%;">
                                            <div class="layui-card-header">
                                                methodCoverage
                                            </div>
                                            <div class="layui-card-body"
                                                 style="padding:5px 5px;height: calc(100% - 55px)">
                                                <div id="methodCoverage" class="layui-col-md6"
                                                     style="width: 100%;height: 100%;max-height: 200px;top:50%;transform: translateY(-50%);"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </el-card>
                        </el-tab-pane>
                    </el-tabs>
                </div>
            </div>
        </div>
        <el-dialog id='productSet' title='项目设置' :visible.sync="productSetVisible" width="60%" top="3vh"
                   style="height: 100%">
            <el-tabs :tab-position="topposition">
                <el-tab-pane label="项目Jenkins">
                    <el-form :label-position="rightposition" label-width="18%" :model="form"
                             style="padding-top: 24px;height: calc(100% - 40px)">
                        <el-form-item label="jenkins地址">
                            <el-input v-model="form.productset.jenkinsurl"></el-input>
                        </el-form-item>
                        <el-form-item label="用户名">
                            <el-input v-model="form.productset.authname"></el-input>
                        </el-form-item>
                        <el-form-item label="密码">
                            <el-input v-model="form.productset.authpwd"></el-input>
                        </el-form-item>
                    </el-form>
                </el-tab-pane>
                <el-tab-pane label="代码覆盖率">
                    <el-form :label-position="rightposition" label-width="30%" :model="form"
                             style="display: inline-block;float:right;padding-top: 24px;height: calc(100% - 40px);width: 100%">
                        <el-form-item style="margin-bottom: 8px">
                            <div slot="label">
                                <el-steps direction="vertical" :active='0' style="width: 50%;float: left;">
                                    <el-step title="清理"></el-step></el-steps>
                                <span>清理任务名</span>
                            </div>
                            <el-input v-model="form.productset.jacocoClearJob"></el-input>
                        </el-form-item>
                        <el-form-item>
                            <div slot="label">
                                <div class="el-steps el-steps--vertical" style="width: 50%; float: left;">
                                    <div class="el-step is-vertical is-flex">
                                        <div class="el-step__head is-process">
                                            <span class="el-step__icon is-text">
                                                <span class="el-step__icon-inner">2</span>
                                            </span>
                                        </div>
                                        <div class="el-step__main">
                                            <div class="el-step__title is-process">任务</div>
                                        </div>
                                    </div>
                                </div>
                                <span>执行计划</span>
                            </div>
                            <el-tree
                                    node-key="id"
                                    style="margin-top: 8px"
                                    ref="tree"
                                    :props="props"
                                    show-checkbox
                                    :data="plans"
                                    :check-on-click-node="true"
                            >
                            </el-tree>
                        </el-form-item>
                        <el-form-item id="servicename" style="height: calc(100% - 230px);">
                            <div slot="label">
                                <div class="el-steps el-steps--vertical" style="width: 50%; float: left;">
                                    <div class="el-step is-vertical is-flex">
                                        <div class="el-step__head is-process">
                                            <span class="el-step__icon is-text">
                                                <span class="el-step__icon-inner">3</span>
                                            </span>
                                        </div>
                                        <div class="el-step__main">
                                            <div class="el-step__title is-process">获取</div>
                                        </div>
                                    </div>
                                </div>
                                <span>描述:任务名</span>
                            </div>
                            <el-input type="textarea" v-model="form.productset.jobname" placeholder='填入内容为描述和jenkins中对应的任务名，格式示例：
settlesys:tfp-cmbc-mysql-uat-settlesys;thirdsys:tfp-cmbc-mysql-uat-thirdsys'></el-input>
                        </el-form-item>

                    </el-form>
                </el-tab-pane>
                <el-tab-pane label='解除运行状态'>
                    <el-form :label-position="rightposition" label-width="18%" :model="form" style="margin-top:24px">
                        <el-form-item label="计划名称">
                            <el-select v-model="form.forceStopPlans" filterable placeholder="选择计划"
                                       style="width: 100%">
                                <el-option v-for="plan in plans" :key="plan.id" :label="plan.name"
                                           :value="plan.id">
                                </el-option>
                            </el-select>
                        </el-form-item>
                        <el-form-item label="任务当前状态:">
                            ${runningState}
                        </el-form-item>
                        <el-form-item label="操作:">
                            <el-button type="success" @click="planStatereFlash">刷新</el-button>
                            <el-tooltip class="item" effect="dark" content="确定计划运行完成但是提示还在运行时点击" placement="bottom">
                                <el-button type="danger" @click="forceStop">更改运行状态
                                </el-button>
                            </el-tooltip>
                        </el-form-item>

                    </el-form>
                </el-tab-pane>
                <el-tab-pane label='外部调用链接'>

                    <el-form :label-position="rightposition" label-width="18%" :model="form" style="margin-top:24px">
                        <el-form-item label="计划">
                            <el-select v-model="form.third_plan" filterable placeholder="选择计划" style="width: 100%">
                                <el-option v-for="plan in plans" :key="plan.id" :label="plan.name"
                                           :value="plan.id">
                                </el-option>
                            </el-select>
                        </el-form-item>
                        <el-form-item label="数据连接方案">
                            <el-select v-model="form.third_dbschemes" filterable placeholder="数据连接方案"
                                       style="width: 100%">
                                <el-option v-for="dbscheme in dbschemes" :key="dbscheme.value" :label="dbscheme.label"
                                           :value="dbscheme.value">
                                </el-option>
                            </el-select>
                        </el-form-item>
                        <el-form-item label="验证地址">
                            <el-input placeholder="验证地址" v-model="form.is_verify_url">
                                <template slot="append">
                                    <el-button type="primary" icon="el-icon-copy-document" plain
                                               @click="copyUrl(form.is_verify_url)"></el-button>
                                </template>
                            </el-input>
                        </el-form-item>
                        <el-form-item label="调试地址">
                            <el-input placeholder="调试地址" v-model="form.debug_url">
                                <template slot="append">
                                    <el-button type="primary" icon="el-icon-copy-document" plain
                                               @click="copyUrl(form.debug_url)"></el-button>
                                </template>
                            </el-input>
                        </el-form-item>
                    </el-form>
                </el-tab-pane>
            </el-tabs>
            <div slot="footer" class="dialog-footer" style="float: right">
                <el-button @click="productSetVisible = false" style="line-height:0px;font-size:12px;height:30px;">取 消
                </el-button>
                <el-button type="primary" @click="jacocoSetSave"
                           style="margin-left:20px;line-height:0px;font-size:12px;height:30px;background:rgba(0,151,136,1);border-radius:2px;border-color:rgba(0,151,136,1)">
                    保 存
                </el-button>
            </div>
        </el-dialog>
        <el-dialog id='noticeSet' title='通知配置' :visible.sync="noticeSetVisible" width="60%" top="3vh"
                   style="height: 100%">
            <el-form :label-position="rightposition" label-width="18%" :model="form" style="padding-top:24px">
                <el-form-item label="配色方案">
                    <el-select v-model="form.reportNoticeSet.color" placeholder="请选择配色方案" style="width: 100%">
                        <el-option label="red" value="red"></el-option>
                        <el-option label="blue" value="blue"></el-option>
                    </el-select>
                </el-form-item>
                <el-tooltip class="item" effect="dark" content="多收件人请用,分隔" placement="bottom">
                    <el-form-item label="收件人">
                        <el-input v-model="form.reportNoticeSet.to_receive" autocomplete="off"></el-input>
                    </el-form-item>
                </el-tooltip>
                <el-form-item label="标题">
                    <el-input v-model="form.reportNoticeSet.description" autocomplete="off"></el-input>
                </el-form-item>
                <el-tooltip class="item" effect="dark" content="内容中如果有参数，只会在任务运行完成后替换，手动发送报告不生效"
                            placement="bottom">
                    <el-form-item label="邮件内容">
                        <el-input type="textarea" v-model="form.reportNoticeSet.text"
                                  autocomplete="off"></el-input>
                    </el-form-item>
                </el-tooltip>
                <hr>
                <el-form-item label="钉钉token">
                    <el-input v-model="form.reportNoticeSet.dingdingtoken" autocomplete="off"></el-input>
                </el-form-item>
            </el-form>
            <div slot="footer" class="dialog-footer" style="float: right">
                <el-button type="primary" @click="sendRepoet"
                           style="margin-left:20px;line-height:0px;font-size:12px;height:30px;background:rgba(0,151,136,1);border-radius:2px;border-color:rgba(0,151,136,1)">
                    发送最新报告
                </el-button>
                <el-button type="primary" @click="savenoticeSet(0)"
                           style="margin-left:20px;line-height:0px;font-size:12px;height:30px;background:rgba(0,151,136,1);border-radius:2px;border-color:rgba(0,151,136,1)">
                    保 存
                </el-button>
                <el-button @click="noticeSetVisible = false"
                           style="margin-left:20px;line-height:0px;font-size:12px;height:30px;">关 闭
                </el-button>
            </div>
        </el-dialog>


        <el-dialog id="planHistory" title='历史记录' :visible.sync="planHistoryVisible" width="90%" top="3vh"
                   style="height: 100%">
            <el-date-picker
                    v-model="historytime"
                    type="daterange"
                    align="right"
                    @change="queryOldBug('omit')"
                    unlink-panels
                    range-separator=" - "
                    value-format="yyyy-MM-dd"
                    start-placeholder="开始日期"
                    end-placeholder="结束日期"
                    :picker-options="pickerOptions">
            </el-date-picker>
            <table id="oldbugtable" lay-size='sm' lay-filter="oldbugtable"
                   style="height: 100%"></table>
        </el-dialog>

        <div id="seeprocess" style="display:none">
            <div class="layui-table">
                <div class="layui-card-body">
                    <div id="log_text"></div>
                </div>
            </div>
        </div>
    </template>
</div>
</body>
<script src="{% static 'homepage/homepage.js' %}"></script>
</html>



